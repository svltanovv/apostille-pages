<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apostille Admin Panel</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .qr-container { display: flex; justify-content: center; margin: 12px 0; padding: 10px; background: #f5f6fa; border-radius: 6px; }
    .qr-container canvas { max-width: 100%; height: auto; }
    .file-card { background-color: #ffffff; padding: 14px; border-radius: 8px; border: 1px solid #e5e7eb; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08); font-size: 13px; line-height: 1.6; }
    .file-card strong { display: block; margin-bottom: 4px; color: #212529; }
    .file-card-actions { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
    .file-card-actions a, .file-card-actions button { flex: 1; min-width: 80px; padding: 6px 8px; font-size: 12px; text-align: center; border-radius: 4px; border: none; cursor: pointer; text-decoration: none; display: inline-block; transition: all 0.15s ease; }
    .btn-open-pdf { background-color: #0b3d91; color: white; }
    .btn-download-qr { background-color: #e9ecef; color: #212529; border: 1px solid #ced4da; }
    .btn-delete { background-color: #dc3545; color: white; }
    .search-box { margin-bottom: 16px; }
    .search-box input { width: 100%; padding: 10px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px; }
    .file-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; margin-top: 12px; }
    .no-documents { text-align: center; padding: 20px; color: #6c757d; font-size: 14px; }
    .status-message { padding: 10px 12px; border-radius: 4px; margin-bottom: 12px; font-size: 13px; display: none; }
    .status-message.success { display: block; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .status-message.error { display: block; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-container"><div class="header-text"><h1>Apostille Admin Panel</h1></div></div>
  </header>

  <main class="content" style="max-width: 800px">
    <div id="login-block">
      <h2 style="margin-bottom: 15px; color: #2f5233">Admin Login</h2>
      <label for="admin-email">Email</label>
      <input type="email" id="admin-email" placeholder="admin@example.com" />
      <label for="admin-password">Password</label>
      <input type="password" id="admin-password" placeholder="Enter password" />
      <button class="btn btn-main" id="login-btn">Login</button>
    </div>

    <div id="admin-block" style="display: none">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="color: #2f5233; margin: 0">Upload Document</h2>
        <button class="btn btn-secondary" id="logout-btn">Logout</button>
      </div>

      <div id="status-message" class="status-message"></div>

      <label>Apostille Number</label>
      <input type="text" id="apostille-number" placeholder="e.g., APO-2026-001" />

      <label>Date of Issue</label>
      <input type="date" id="issue-date" />

      <label>Referral Code (Optional)</label>
      <input type="text" id="referral-code" placeholder="REF-123" />

      <label>PDF File</label>
      <input type="file" id="pdf-file" accept="application/pdf" />

      <button class="btn btn-main" id="upload-btn" style="margin-top: 10px; width: 100%">Upload PDF</button>

      <h3 style="margin: 28px 0 12px; color: #2f5233">Uploaded Documents</h3>
      <div class="search-box"><input type="text" id="search-input" placeholder="Search..." /></div>
      <div id="file-list" class="file-grid"></div>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const SUPABASE_URL = "https://tfdrjiztsbuusngfdmye.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOi
